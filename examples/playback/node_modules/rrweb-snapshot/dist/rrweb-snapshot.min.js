var rrwebSnapshot=function(e){"use strict";var t;(t=e.NodeType||(e.NodeType={}))[t.Document=0]="Document",t[t.DocumentType=1]="DocumentType",t[t.Element=2]="Element",t[t.Text=3]="Text",t[t.CDATA=4]="CDATA",t[t.Comment=5]="Comment";var r=1,n=RegExp("[^a-z1-6-_]"),a=-2;function i(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(o).join(""):null}catch(e){return null}}function o(e){return function(e){return"styleSheet"in e}(e)?i(e.styleSheet)||"":e.cssText}var s=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,c=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,u=/^(data:)([^,]*),(.*)/i;function l(e,t){return(e||"").replace(s,function(e,r,n,a,i,o){var s,l=n||i||o,f=r||a||"";if(!l)return e;if(!c.test(l))return"url("+f+l+f+")";if(u.test(l))return"url("+f+l+f+")";if("/"===l[0])return"url("+f+(((s=t).indexOf("//")>-1?s.split("/").slice(0,3).join("/"):s.split("/")[0]).split("?")[0]+l)+f+")";var p=t.split("/"),m=l.split("/");p.pop();for(var d=0,h=m;d<h.length;d++){var v=h[d];"."!==v&&(".."===v?p.pop():p.push(v))}return"url("+f+p.join("/")+f+")"})}function f(e,t){if(!t||""===t.trim())return t;var r=e.createElement("a");return r.href=t,r.href}function p(e,t,r){return"src"===t||("href"===t||"xlink:href"===t)&&r?f(e,r):"srcset"===t&&r?function(e,t){return""===t.trim()?t:t.split(",").map(function(t){var r=t.trimLeft().trimRight().split(" ");return 2===r.length?f(e,r[0])+" "+r[1]:1===r.length?""+f(e,r[0]):""}).join(", ")}(e,r):"style"===t&&r?l(r,location.href):r}function m(t,r){var a,o=r.doc,s=r.blockClass,c=r.blockSelector,u=r.inlineStylesheet,f=r.maskInputOptions,m=void 0===f?{}:f,d=r.recordCanvas;switch(t.nodeType){case t.DOCUMENT_NODE:return{type:e.NodeType.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:e.NodeType.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId};case t.ELEMENT_NODE:for(var h=function(e,t,r){if("string"==typeof t){if(e.classList.contains(t))return!0}else e.classList.forEach(function(e){if(t.test(e))return!0});return!!r&&e.matches(r)}(t,s,c),v=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return n.test(t)?"div":t}(t),y={},g=0,b=Array.from(t.attributes);g<b.length;g++){var T=b[g],N=T.name,C=T.value;y[N]=p(o,N,C)}if("link"===v&&u){var k,E=Array.from(o.styleSheets).find(function(e){return e.href===t.href});(k=i(E))&&(delete y.rel,delete y.href,y._cssText=l(k,E.href))}if("style"===v&&t.sheet&&!(t.innerText||t.textContent||"").trim().length)(k=i(t.sheet))&&(y._cssText=l(k,location.href));if("input"===v||"textarea"===v||"select"===v){C=t.value;"radio"!==y.type&&"checkbox"!==y.type&&"submit"!==y.type&&"button"!==y.type&&C?y.value=m[y.type]||m[v]?"*".repeat(C.length):C:t.checked&&(y.checked=t.checked)}if("option"===v){var w=t.parentElement;y.value===w.value&&(y.selected=t.selected)}if("canvas"===v&&d&&(y.rr_dataURL=t.toDataURL()),"audio"!==v&&"video"!==v||(y.rr_mediaState=t.paused?"paused":"played"),t.scrollLeft&&(y.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(y.rr_scrollTop=t.scrollTop),h){var x=t.getBoundingClientRect(),D=x.width,_=x.height;y={class:y.class,rr_width:D+"px",rr_height:_+"px"}}return{type:e.NodeType.Element,tagName:v,attributes:y,childNodes:[],isSVG:(a=t,"svg"===a.tagName||a instanceof SVGElement||void 0),needBlock:h};case t.TEXT_NODE:var S=t.parentNode&&t.parentNode.tagName,A=t.textContent,O="STYLE"===S||void 0;return O&&A&&(A=l(A,location.href)),"SCRIPT"===S&&(A="SCRIPT_PLACEHOLDER"),{type:e.NodeType.Text,textContent:A||"",isStyle:O};case t.CDATA_SECTION_NODE:return{type:e.NodeType.CDATA,textContent:""};case t.COMMENT_NODE:return{type:e.NodeType.Comment,textContent:t.textContent||""};default:return!1}}function d(e){return void 0===e?"":e.toLowerCase()}function h(t,n){var i,o=n.doc,s=n.map,c=n.blockClass,u=n.blockSelector,l=n.skipChild,f=void 0!==l&&l,p=n.inlineStylesheet,v=void 0===p||p,y=n.maskInputOptions,g=void 0===y?{}:y,b=n.slimDOMOptions,T=n.recordCanvas,N=void 0!==T&&T,C=n.preserveWhiteSpace,k=void 0===C||C,E=m(t,{doc:o,blockClass:c,blockSelector:u,inlineStylesheet:v,maskInputOptions:g,recordCanvas:N});if(!E)return console.warn(t,"not serialized"),null;i="__sn"in t?t.__sn.id:!function(t,r){if(r.comment&&t.type===e.NodeType.Comment)return!0;if(t.type===e.NodeType.Element){if(r.script&&("script"===t.tagName||"link"===t.tagName&&"preload"===t.attributes.rel&&"script"===t.attributes.as))return!0;if(r.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(d(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===d(t.attributes.name)||"icon"===d(t.attributes.rel)||"apple-touch-icon"===d(t.attributes.rel)||"shortcut icon"===d(t.attributes.rel))))return!0;if("meta"===t.tagName){if(r.headMetaDescKeywords&&d(t.attributes.name).match(/^description|keywords$/))return!0;if(r.headMetaSocial&&(d(t.attributes.property).match(/^(og|twitter|fb):/)||d(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===d(t.attributes.name)))return!0;if(r.headMetaRobots&&("robots"===d(t.attributes.name)||"googlebot"===d(t.attributes.name)||"bingbot"===d(t.attributes.name)))return!0;if(r.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(r.headMetaAuthorship&&("author"===d(t.attributes.name)||"generator"===d(t.attributes.name)||"framework"===d(t.attributes.name)||"publisher"===d(t.attributes.name)||"progid"===d(t.attributes.name)||d(t.attributes.property).match(/^article:/)||d(t.attributes.property).match(/^product:/)))return!0;if(r.headMetaVerification&&("google-site-verification"===d(t.attributes.name)||"yandex-verification"===d(t.attributes.name)||"csrf-token"===d(t.attributes.name)||"p:domain_verify"===d(t.attributes.name)||"verify-v1"===d(t.attributes.name)||"verification"===d(t.attributes.name)||"shopify-checkout-api-token"===d(t.attributes.name)))return!0}}return!1}(E,b)&&(k||E.type!==e.NodeType.Text||E.isStyle||E.textContent.replace(/^\s+|\s+$/gm,"").length)?r++:a;var w=Object.assign(E,{id:i});if(t.__sn=w,i===a)return null;s[i]=t;var x=!f;if(w.type===e.NodeType.Element&&(x=x&&!w.needBlock,delete w.needBlock),(w.type===e.NodeType.Document||w.type===e.NodeType.Element)&&x){b.headWhitespace&&E.type===e.NodeType.Element&&"head"===E.tagName&&(k=!1);for(var D=0,_=Array.from(t.childNodes);D<_.length;D++){var S=h(_[D],{doc:o,map:s,blockClass:c,blockSelector:u,skipChild:f,inlineStylesheet:v,maskInputOptions:g,slimDOMOptions:b,recordCanvas:N,preserveWhiteSpace:k});S&&w.childNodes.push(S)}}return w}var v=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function y(e,t){void 0===t&&(t={});var r=1,n=1;function a(e){var t=e.match(/\n/g);t&&(r+=t.length);var a=e.lastIndexOf("\n");n=-1===a?n+e.length:e.length-a}function i(){var e={line:r,column:n};return function(t){return t.position=new o(e),m(),t}}var o=function(){return function(e){this.start=e,this.end={line:r,column:n},this.source=t.source}}();o.prototype.content=e;var s=[];function c(a){var i=new Error(t.source+":"+r+":"+n+": "+a);if(i.reason=a,i.filename=t.source,i.line=r,i.column=n,i.source=e,!t.silent)throw i;s.push(i)}function u(){return p(/^{\s*/)}function l(){return p(/^}/)}function f(){var t,r=[];for(m(),d(r);e.length&&"}"!==e.charAt(0)&&(t=D()||_());)!1!==t&&(r.push(t),d(r));return r}function p(t){var r=t.exec(e);if(r){var n=r[0];return a(n),e=e.slice(n.length),r}}function m(){p(/^\s*/)}function d(e){var t;for(void 0===e&&(e=[]);t=h();)!1!==t&&e.push(t),t=h();return e}function h(){var t=i();if("/"===e.charAt(0)&&"*"===e.charAt(1)){for(var r=2;""!==e.charAt(r)&&("*"!==e.charAt(r)||"/"!==e.charAt(r+1));)++r;if(r+=2,""===e.charAt(r-1))return c("End of comment missing");var o=e.slice(2,r-2);return n+=2,a(o),e=e.slice(r),n+=2,t({type:"comment",comment:o})}}function y(){var e=p(/^([^{]+)/);if(e)return g(e[0]).replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(e){return e.replace(/,/g,"â€Œ")}).split(/\s*(?![^(]*\)),\s*/).map(function(e){return e.replace(/\u200C/g,",")})}function b(){var e=i(),t=p(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(t){var r=g(t[0]);if(!p(/^:\s*/))return c("property missing ':'");var n=p(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),a=e({type:"declaration",property:r.replace(v,""),value:n?g(n[0]).replace(v,""):""});return p(/^[;\s]*/),a}}function T(){var e,t=[];if(!u())return c("missing '{'");for(d(t);e=b();)!1!==e&&(t.push(e),d(t)),e=b();return l()?t:c("missing '}'")}function N(){for(var e,t=[],r=i();e=p(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)t.push(e[1]),p(/^,\s*/);if(t.length)return r({type:"keyframe",values:t,declarations:T()})}var C,k=x("import"),E=x("charset"),w=x("namespace");function x(e){var t=new RegExp("^@"+e+"\\s*([^;]+);");return function(){var r=i(),n=p(t);if(n){var a={type:e};return a[e]=n[1].trim(),r(a)}}}function D(){if("@"===e[0])return function(){var e=i(),t=p(/^@([-\w]+)?keyframes\s*/);if(t){var r=t[1];if(!(t=p(/^([-\w]+)\s*/)))return c("@keyframes missing name");var n,a=t[1];if(!u())return c("@keyframes missing '{'");for(var o=d();n=N();)o.push(n),o=o.concat(d());return l()?e({type:"keyframes",name:a,vendor:r,keyframes:o}):c("@keyframes missing '}'")}}()||function(){var e=i(),t=p(/^@media *([^{]+)/);if(t){var r=g(t[1]);if(!u())return c("@media missing '{'");var n=d().concat(f());return l()?e({type:"media",media:r,rules:n}):c("@media missing '}'")}}()||function(){var e=i(),t=p(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(t)return e({type:"custom-media",name:g(t[1]),media:g(t[2])})}()||function(){var e=i(),t=p(/^@supports *([^{]+)/);if(t){var r=g(t[1]);if(!u())return c("@supports missing '{'");var n=d().concat(f());return l()?e({type:"supports",supports:r,rules:n}):c("@supports missing '}'")}}()||k()||E()||w()||function(){var e=i(),t=p(/^@([-\w]+)?document *([^{]+)/);if(t){var r=g(t[1]),n=g(t[2]);if(!u())return c("@document missing '{'");var a=d().concat(f());return l()?e({type:"document",document:n,vendor:r,rules:a}):c("@document missing '}'")}}()||function(){var e=i();if(p(/^@page */)){var t=y()||[];if(!u())return c("@page missing '{'");for(var r,n=d();r=b();)n.push(r),n=n.concat(d());return l()?e({type:"page",selectors:t,declarations:n}):c("@page missing '}'")}}()||function(){var e=i();if(p(/^@host\s*/)){if(!u())return c("@host missing '{'");var t=d().concat(f());return l()?e({type:"host",rules:t}):c("@host missing '}'")}}()||function(){var e=i();if(p(/^@font-face\s*/)){if(!u())return c("@font-face missing '{'");for(var t,r=d();t=b();)r.push(t),r=r.concat(d());return l()?e({type:"font-face",declarations:r}):c("@font-face missing '}'")}}()}function _(){var e=i(),t=y();return t?(d(),e({type:"rule",selectors:t,declarations:T()})):c("selector missing")}return function e(t,r){var n=t&&"string"==typeof t.type;var a=n?t:r;for(var i=0,o=Object.keys(t);i<o.length;i++){var s=o[i],c=t[s];Array.isArray(c)?c.forEach(function(t){e(t,a)}):c&&"object"==typeof c&&e(c,a)}n&&Object.defineProperty(t,"parent",{configurable:!0,writable:!0,enumerable:!1,value:r||null});return t}((C=f(),{type:"stylesheet",stylesheet:{source:t.source,rules:C,parsingErrors:s}}))}function g(e){return e?e.replace(/^\s+|\s+$/g,""):""}var b={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};var T=/([^\\]):hover/g;function N(e){var t=y(e,{silent:!0});return t.stylesheet?(t.stylesheet.rules.forEach(function(t){"selectors"in t&&(t.selectors||[]).forEach(function(t){if(T.test(t)){var r=t.replace(T,"$1.\\:hover");e=e.replace(t,t+", "+r)}})}),e):e}function C(t,r){var n=r.doc,a=r.hackCss;switch(t.type){case e.NodeType.Document:return n.implementation.createDocument(null,"",null);case e.NodeType.DocumentType:return n.implementation.createDocumentType(t.name||"html",t.publicId,t.systemId);case e.NodeType.Element:var i,o=function(e){var t=b[e.tagName]?b[e.tagName]:e.tagName;return"link"===t&&e.attributes._cssText&&(t="style"),t}(t);i=t.isSVG?n.createElementNS("http://www.w3.org/2000/svg",o):n.createElement(o);var s=function(e){if(!t.attributes.hasOwnProperty(e))return"continue";var r=t.attributes[e];if(r="boolean"==typeof r||"number"==typeof r?"":r,e.startsWith("rr_")){if("canvas"===o&&"rr_dataURL"===e){var s=document.createElement("img");s.src=r,s.onload=function(){var e=i.getContext("2d");e&&e.drawImage(s,0,0,s.width,s.height)}}if("rr_width"===e&&(i.style.width=r),"rr_height"===e&&(i.style.height=r),"rr_mediaState"===e)switch(r){case"played":i.play();case"paused":i.pause()}}else{var c="textarea"===o&&"value"===e,u="style"===o&&"_cssText"===e;if(u&&a&&(r=N(r)),c||u){for(var l=n.createTextNode(r),f=0,p=Array.from(i.childNodes);f<p.length;f++){var m=p[f];m.nodeType===i.TEXT_NODE&&i.removeChild(m)}return i.appendChild(l),"continue"}if("iframe"===o&&"src"===e)return"continue";try{t.isSVG&&"xlink:href"===e?i.setAttributeNS("http://www.w3.org/1999/xlink",e,r):"onload"===e||"onclick"===e||"onmouse"===e.substring(0,7)?i.setAttribute("_"+e,r):i.setAttribute(e,r)}catch(e){}}};for(var c in t.attributes)s(c);return i;case e.NodeType.Text:return n.createTextNode(t.isStyle&&a?N(t.textContent):t.textContent);case e.NodeType.CDATA:return n.createCDATASection(t.textContent);case e.NodeType.Comment:return n.createComment(t.textContent);default:return null}}function k(t,r){var n=r.doc,a=r.map,i=r.skipChild,o=void 0!==i&&i,s=r.hackCss,c=void 0===s||s,u=C(t,{doc:n,hackCss:c});if(!u)return null;if(t.type===e.NodeType.Document&&(n.close(),n.open(),u=n),u.__sn=t,a[t.id]=u,(t.type===e.NodeType.Document||t.type===e.NodeType.Element)&&!o)for(var l=0,f=t.childNodes;l<f.length;l++){var p=f[l],m=k(p,{doc:n,map:a,skipChild:!1,hackCss:c});m?u.appendChild(m):console.warn("Failed to rebuild",p)}return u}return e.snapshot=function(e,t){var r=t||{},n=r.blockClass,a=void 0===n?"rr-block":n,i=r.inlineStylesheet,o=void 0===i||i,s=r.recordCanvas,c=void 0!==s&&s,u=r.blockSelector,l=void 0===u?null:u,f=r.maskAllInputs,p=void 0!==f&&f,m=r.slimDOM,d=void 0!==m&&m,v={};return[h(e,{doc:e,map:v,blockClass:a,blockSelector:l,skipChild:!1,inlineStylesheet:o,maskInputOptions:!0===p?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===p?{}:p,slimDOMOptions:!0===d||"all"===d?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===d,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===d?{}:d,recordCanvas:c}),v]},e.serializeNodeWithId=h,e.rebuild=function(t,r){var n=r.doc,a=r.onVisit,i=r.hackCss,o={},s=k(t,{doc:n,map:o,skipChild:!1,hackCss:void 0===i||i});return function(e,t){for(var r in e)e[r]&&(n=e[r],t(n));var n}(o,function(t){a&&a(t),function(t){var r=t.__sn;if(r.type===e.NodeType.Element){var n=t;for(var a in r.attributes)if(r.attributes.hasOwnProperty(a)&&a.startsWith("rr_")){var i=r.attributes[a];"rr_scrollLeft"===a&&(n.scrollLeft=i),"rr_scrollTop"===a&&(n.scrollTop=i)}}}(t)}),[s,o]},e.buildNodeWithSN=k,e.addHoverClass=N,e.transformAttribute=p,e.visitSnapshot=function(t,r){!function t(n){r(n),n.type!==e.NodeType.Document&&n.type!==e.NodeType.Element||n.childNodes.forEach(t)}(t)},e.cleanupSnapshot=function(){r=1},e.IGNORED_NODE=a,e}({});
//# sourceMappingURL=rrweb-snapshot.min.js.map
