var rrwebRecord=function(){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e,t=function(){return(t=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)};function n(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],o=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&o>=e.length&&(e=void 0),{value:e&&e[o++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function o(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var o,r,a=n.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(o=a.next()).done;)i.push(o.value)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}function r(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(o(arguments[t]));return e}!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(e||(e={}));var a=1,i=RegExp("[^a-z1-6-_]");function u(e){try{var t=e.rules||e.cssRules;return t?Array.from(t).map(s).join(""):null}catch(e){return null}}function s(e){return function(e){return"styleSheet"in e}(e)?u(e.styleSheet)||"":e.cssText}var l,c,d,p,f,h=/url\((?:(')([^']*)'|(")([^"]*)"|([^)]*))\)/gm,m=/^(?!www\.|(?:http|ftp)s?:\/\/|[A-Za-z]:\\|\/\/|#).*/,v=/^(data:)([^,]*),(.*)/i;function y(e,t){return(e||"").replace(h,(function(e,n,o,r,a,i){var u,s=o||a||i,l=n||r||"";if(!s)return e;if(!m.test(s))return"url("+l+s+l+")";if(v.test(s))return"url("+l+s+l+")";if("/"===s[0])return"url("+l+(((u=t).indexOf("//")>-1?u.split("/").slice(0,3).join("/"):u.split("/")[0]).split("?")[0]+s)+l+")";var c=t.split("/"),d=s.split("/");c.pop();for(var p=0,f=d;p<f.length;p++){var h=f[p];"."!==h&&(".."===h?c.pop():c.push(h))}return"url("+l+c.join("/")+l+")"}))}function g(e,t){if(!t||""===t.trim())return t;var n=e.createElement("a");return n.href=t,n.href}function b(e,t,n){return"src"===t||("href"===t||"xlink:href"===t)&&n?g(e,n):"srcset"===t&&n?function(e,t){return""===t.trim()?t:t.split(",").map((function(t){var n=t.trimLeft().trimRight().split(" ");return 2===n.length?g(e,n[0])+" "+n[1]:1===n.length?""+g(e,n[0]):""})).join(", ")}(e,n):"style"===t&&n?y(n,location.href):n}function C(t,n){var o,r=n.doc,a=n.blockClass,s=n.blockSelector,l=n.inlineStylesheet,c=n.maskInputOptions,d=void 0===c?{}:c,p=n.recordCanvas;switch(t.nodeType){case t.DOCUMENT_NODE:return{type:e.Document,childNodes:[]};case t.DOCUMENT_TYPE_NODE:return{type:e.DocumentType,name:t.name,publicId:t.publicId,systemId:t.systemId};case t.ELEMENT_NODE:for(var f=function(e,t,n){if("string"==typeof t){if(e.classList.contains(t))return!0}else e.classList.forEach((function(e){if(t.test(e))return!0}));return!!n&&e.matches(n)}(t,a,s),h=function(e){if(e instanceof HTMLFormElement)return"form";var t=e.tagName.toLowerCase().trim();return i.test(t)?"div":t}(t),m={},v=0,g=Array.from(t.attributes);v<g.length;v++){var C=g[v],S=C.name,w=C.value;m[S]=b(r,S,w)}if("link"===h&&l){var k,E=Array.from(r.styleSheets).find((function(e){return e.href===t.href}));(k=u(E))&&(delete m.rel,delete m.href,m._cssText=y(k,E.href))}if("style"===h&&t.sheet&&!(t.innerText||t.textContent||"").trim().length)(k=u(t.sheet))&&(m._cssText=y(k,location.href));if("input"===h||"textarea"===h||"select"===h){w=t.value;"radio"!==m.type&&"checkbox"!==m.type&&"submit"!==m.type&&"button"!==m.type&&w?m.value=d[m.type]||d[h]?"*".repeat(w.length):w:t.checked&&(m.checked=t.checked)}if("option"===h){var M=t.parentElement;m.value===M.value&&(m.selected=t.selected)}if("canvas"===h&&p&&(m.rr_dataURL=t.toDataURL()),"audio"!==h&&"video"!==h||(m.rr_mediaState=t.paused?"paused":"played"),t.scrollLeft&&(m.rr_scrollLeft=t.scrollLeft),t.scrollTop&&(m.rr_scrollTop=t.scrollTop),f){var I=t.getBoundingClientRect(),O=I.width,x=I.height;m={class:m.class,rr_width:O+"px",rr_height:x+"px"}}return{type:e.Element,tagName:h,attributes:m,childNodes:[],isSVG:(o=t,"svg"===o.tagName||o instanceof SVGElement||void 0),needBlock:f};case t.TEXT_NODE:var N=t.parentNode&&t.parentNode.tagName,T=t.textContent,_="STYLE"===N||void 0;return _&&T&&(T=y(T,location.href)),"SCRIPT"===N&&(T="SCRIPT_PLACEHOLDER"),{type:e.Text,textContent:T||"",isStyle:_};case t.CDATA_SECTION_NODE:return{type:e.CDATA,textContent:""};case t.COMMENT_NODE:return{type:e.Comment,textContent:t.textContent||""};default:return!1}}function S(e){return void 0===e?"":e.toLowerCase()}function w(t,n){var o,r=n.doc,i=n.map,u=n.blockClass,s=n.blockSelector,l=n.skipChild,c=void 0!==l&&l,d=n.inlineStylesheet,p=void 0===d||d,f=n.maskInputOptions,h=void 0===f?{}:f,m=n.slimDOMOptions,v=n.recordCanvas,y=void 0!==v&&v,g=n.preserveWhiteSpace,b=void 0===g||g,k=C(t,{doc:r,blockClass:u,blockSelector:s,inlineStylesheet:p,maskInputOptions:h,recordCanvas:y});if(!k)return console.warn(t,"not serialized"),null;o="__sn"in t?t.__sn.id:!function(t,n){if(n.comment&&t.type===e.Comment)return!0;if(t.type===e.Element){if(n.script&&("script"===t.tagName||"link"===t.tagName&&"preload"===t.attributes.rel&&"script"===t.attributes.as))return!0;if(n.headFavicon&&("link"===t.tagName&&"shortcut icon"===t.attributes.rel||"meta"===t.tagName&&(S(t.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===S(t.attributes.name)||"icon"===S(t.attributes.rel)||"apple-touch-icon"===S(t.attributes.rel)||"shortcut icon"===S(t.attributes.rel))))return!0;if("meta"===t.tagName){if(n.headMetaDescKeywords&&S(t.attributes.name).match(/^description|keywords$/))return!0;if(n.headMetaSocial&&(S(t.attributes.property).match(/^(og|twitter|fb):/)||S(t.attributes.name).match(/^(og|twitter):/)||"pinterest"===S(t.attributes.name)))return!0;if(n.headMetaRobots&&("robots"===S(t.attributes.name)||"googlebot"===S(t.attributes.name)||"bingbot"===S(t.attributes.name)))return!0;if(n.headMetaHttpEquiv&&void 0!==t.attributes["http-equiv"])return!0;if(n.headMetaAuthorship&&("author"===S(t.attributes.name)||"generator"===S(t.attributes.name)||"framework"===S(t.attributes.name)||"publisher"===S(t.attributes.name)||"progid"===S(t.attributes.name)||S(t.attributes.property).match(/^article:/)||S(t.attributes.property).match(/^product:/)))return!0;if(n.headMetaVerification&&("google-site-verification"===S(t.attributes.name)||"yandex-verification"===S(t.attributes.name)||"csrf-token"===S(t.attributes.name)||"p:domain_verify"===S(t.attributes.name)||"verify-v1"===S(t.attributes.name)||"verification"===S(t.attributes.name)||"shopify-checkout-api-token"===S(t.attributes.name)))return!0}}return!1}(k,m)&&(b||k.type!==e.Text||k.isStyle||k.textContent.replace(/^\s+|\s+$/gm,"").length)?a++:-2;var E=Object.assign(k,{id:o});if(t.__sn=E,-2===o)return null;i[o]=t;var M=!c;if(E.type===e.Element&&(M=M&&!E.needBlock,delete E.needBlock),(E.type===e.Document||E.type===e.Element)&&M){m.headWhitespace&&k.type===e.Element&&"head"===k.tagName&&(b=!1);for(var I=0,O=Array.from(t.childNodes);I<O.length;I++){var x=w(O[I],{doc:r,map:i,blockClass:u,blockSelector:s,skipChild:c,inlineStylesheet:p,maskInputOptions:h,slimDOMOptions:m,recordCanvas:y,preserveWhiteSpace:b});x&&E.childNodes.push(x)}}return E}function k(e,t,n){void 0===n&&(n=document);var o={capture:!0,passive:!0};return n.addEventListener(e,t,o),function(){return n.removeEventListener(e,t,o)}}!function(e){e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom"}(l||(l={})),function(e){e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log"}(c||(c={})),function(e){e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd"}(d||(d={})),function(e){e[e.Play=0]="Play",e[e.Pause=1]="Pause"}(p||(p={})),function(e){e.Start="start",e.Pause="pause",e.Resume="resume",e.Resize="resize",e.Finish="finish",e.FullsnapshotRebuilded="fullsnapshot-rebuilded",e.LoadStylesheetStart="load-stylesheet-start",e.LoadStylesheetEnd="load-stylesheet-end",e.SkipStart="skip-start",e.SkipEnd="skip-end",e.MouseInteraction="mouse-interaction",e.EventCast="event-cast",e.CustomEvent="custom-event",e.Flush="flush",e.StateChange="state-change"}(f||(f={}));var E={map:{},getId:function(e){return e.__sn?e.__sn.id:-1},getNode:function(e){return E.map[e]||null},removeNodeFromMap:function(e){var t=e.__sn&&e.__sn.id;delete E.map[t],e.childNodes&&e.childNodes.forEach((function(e){return E.removeNodeFromMap(e)}))},has:function(e){return E.map.hasOwnProperty(e)}};function M(e,t,n){void 0===n&&(n={});var o=null,r=0;return function(a){var i=Date.now();r||!1!==n.leading||(r=i);var u=t-(i-r),s=this,l=arguments;u<=0||u>t?(o&&(window.clearTimeout(o),o=null),r=i,e.apply(s,l)):o||!1===n.trailing||(o=window.setTimeout((function(){r=!1===n.leading?0:Date.now(),o=null,e.apply(s,l)}),u))}}function I(e,t,n,o,r){void 0===r&&(r=window);var a=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,o?n:{set:function(e){var t=this;setTimeout((function(){n.set.call(t,e)}),0),a&&a.set&&a.set.call(this,e)}}),function(){return I(e,t,a||{},!0)}}function O(e,t,n){try{if(!(t in e))return function(){};var o=e[t],r=n(o);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:o}})),e[t]=r,function(){e[t]=o}}catch(e){return function(){}}}function x(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function N(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function T(e,t){if(!e)return!1;if(e.nodeType===e.ELEMENT_NODE){var n=!1;return"string"==typeof t?n=e.classList.contains(t):e.classList.forEach((function(e){t.test(e)&&(n=!0)})),n||T(e.parentNode,t)}return e.nodeType,e.TEXT_NODE,T(e.parentNode,t)}function _(e){return"__sn"in e&&-2===e.__sn.id}function L(e){return Boolean(e.changedTouches)}function D(e){return"__ln"in e}var R=function(){function e(){this.length=0,this.head=null}return e.prototype.get=function(e){if(e>=this.length)throw new Error("Position outside of list range");for(var t=this.head,n=0;n<e;n++)t=(null==t?void 0:t.next)||null;return t},e.prototype.addNode=function(e){var t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&D(e.previousSibling)){var n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&D(e.nextSibling)){n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;this.length++},e.prototype.removeNode=function(e){var t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next&&(t.next.previous=t.previous)):(this.head=t.next,this.head&&(this.head.previous=null)),e.__ln&&delete e.__ln,this.length--)},e}(),F=function(e,t){return e+"@"+t};function A(e){return"__sn"in e}function z(e,t){e.delete(t),t.childNodes.forEach((function(t){return z(e,t)}))}function P(e,t){var n=t.parentNode;if(!n)return!1;var o=E.getId(n);return!!e.some((function(e){return e.id===o}))||P(e,n)}function j(e,t){var n=t.parentNode;return!!n&&(!!e.has(n)||j(e,n))}function H(e){if(!e||!e.outerHTML)return"";for(var t="";e.parentElement;){var n=e.localName;if(!n)break;n=n.toLowerCase();var o=e.parentElement,r=[];if(o.children&&o.children.length>0)for(var a=0;a<o.children.length;a++){var i=o.children[a];i.localName&&i.localName.toLowerCase&&i.localName.toLowerCase()===n&&r.push(i)}r.length>1&&(n+=":eq("+r.indexOf(e)+")"),t=n+(t?">"+t:""),e=o}return t}function V(e,t){var n={numOfKeysLimit:50};Object.assign(n,t);var o=[],r=[];return JSON.stringify(e,(function(e,t){if(o.length>0){var a=o.indexOf(this);~a?o.splice(a+1):o.push(this),~a?r.splice(a,1/0,e):r.push(e),~o.indexOf(t)&&(t=o[0]===t?"[Circular ~]":"[Circular ~."+r.slice(0,o.indexOf(t)).join(".")+"]")}else o.push(t);if(null==t)return t;if(function(e){return"object"==typeof e&&Object.keys(e).length>n.numOfKeysLimit||"function"==typeof e}(t))return function(e){var t=e.toString();n.stringLengthLimit&&t.length>n.stringLengthLimit&&(t=t.slice(0,n.stringLengthLimit)+"...");return t}(t);if(t instanceof Event){var i={};for(var u in t){var s=t[u];Array.isArray(s)?i[u]=H(s.length?s[0]:null):i[u]=s}return i}return t instanceof Node?t instanceof HTMLElement?t?t.outerHTML:"":t.nodeName:t}))}var W=new(function(){function e(){var e=this;this.frozen=!1,this.texts=[],this.attributes=[],this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=function(t){t.forEach(e.processMutation),e.frozen||e.emit()},this.emit=function(){for(var t,o,r,a,i=[],u=new R,s=function(t){for(var n=t,o=-2;-2===o;)o=(n=n&&n.nextSibling)&&E.getId(n);return-1===o&&T(t.nextSibling,e.blockClass)&&(o=null),o},l=function(t){if(t.parentNode&&document.contains(t)){var n=E.getId(t.parentNode),o=s(t);if(-1===n||-1===o)return u.addNode(t);var r=w(t,{doc:document,map:E.map,blockClass:e.blockClass,blockSelector:e.blockSelector,skipChild:!0,inlineStylesheet:e.inlineStylesheet,maskInputOptions:e.maskInputOptions,slimDOMOptions:e.slimDOMOptions,recordCanvas:e.recordCanvas});r&&i.push({parentId:n,nextId:o,node:r})}};e.mapRemoves.length;)E.removeNodeFromMap(e.mapRemoves.shift());try{for(var c=n(e.movedSet),d=c.next();!d.done;d=c.next()){var p=d.value;P(e.removes,p)&&!e.movedSet.has(p.parentNode)||l(p)}}catch(e){t={error:e}}finally{try{d&&!d.done&&(o=c.return)&&o.call(c)}finally{if(t)throw t.error}}try{for(var f=n(e.addedSet),h=f.next();!h.done;h=f.next()){p=h.value;j(e.droppedSet,p)||P(e.removes,p)?j(e.movedSet,p)?l(p):e.droppedSet.add(p):l(p)}}catch(e){r={error:e}}finally{try{h&&!h.done&&(a=f.return)&&a.call(f)}finally{if(r)throw r.error}}for(var m=null;u.length;){var v=null;if(m){var y=E.getId(m.value.parentNode),g=s(m.value);-1!==y&&-1!==g&&(v=m)}if(!v)for(var b=u.length-1;b>=0;b--){var C=u.get(b);y=E.getId(C.value.parentNode),g=s(C.value);if(-1!==y&&-1!==g){v=C;break}}if(!v){for(;u.head;)u.removeNode(u.head.value);break}m=v.previous,u.removeNode(v.value),l(v.value)}var S={texts:e.texts.map((function(e){return{id:E.getId(e.node),value:e.value}})).filter((function(e){return E.has(e.id)})),attributes:e.attributes.map((function(e){return{id:E.getId(e.node),attributes:e.attributes}})).filter((function(e){return E.has(e.id)})),removes:e.removes,adds:i};(S.texts.length||S.attributes.length||S.removes.length||S.adds.length)&&(e.texts=[],e.attributes=[],e.removes=[],e.addedSet=new Set,e.movedSet=new Set,e.droppedSet=new Set,e.movedMap={},e.emissionCallback(S))},this.processMutation=function(t){if(!_(t.target))switch(t.type){case"characterData":var n=t.target.textContent;T(t.target,e.blockClass)||n===t.oldValue||e.texts.push({value:n,node:t.target});break;case"attributes":n=t.target.getAttribute(t.attributeName);if(T(t.target,e.blockClass)||n===t.oldValue)return;var o=e.attributes.find((function(e){return e.node===t.target}));o||(o={node:t.target,attributes:{}},e.attributes.push(o)),o.attributes[t.attributeName]=b(document,t.attributeName,n);break;case"childList":t.addedNodes.forEach((function(n){return e.genAdds(n,t.target)})),t.removedNodes.forEach((function(n){var o=E.getId(n),r=E.getId(t.target);T(n,e.blockClass)||T(t.target,e.blockClass)||_(n)||(e.addedSet.has(n)?(z(e.addedSet,n),e.droppedSet.add(n)):e.addedSet.has(t.target)&&-1===o||function e(t){var n=E.getId(t);return!E.has(n)||(!t.parentNode||t.parentNode.nodeType!==t.DOCUMENT_NODE)&&(!t.parentNode||e(t.parentNode))}(t.target)||(e.movedSet.has(n)&&e.movedMap[F(o,r)]?z(e.movedSet,n):e.removes.push({parentId:r,id:o})),e.mapRemoves.push(n))}))}},this.genAdds=function(t,n){if(!(T(t,e.blockClass)||n&&T(n,e.blockClass))){if(A(t)){if(_(t))return;e.movedSet.add(t);var o=null;n&&A(n)&&(o=n.__sn.id),o&&(e.movedMap[F(t.__sn.id,o)]=!0)}else e.addedSet.add(t),e.droppedSet.delete(t);t.childNodes.forEach((function(t){return e.genAdds(t)}))}}}return e.prototype.init=function(e,t,n,o,r,a,i){this.blockClass=t,this.blockSelector=n,this.inlineStylesheet=o,this.maskInputOptions=r,this.recordCanvas=a,this.slimDOMOptions=i,this.emissionCallback=e},e.prototype.freeze=function(){this.frozen=!0},e.prototype.unfreeze=function(){this.frozen=!1},e.prototype.isFrozen=function(){return this.frozen},e}());function U(e,t,n){if(!1===n.mouseInteraction)return function(){};var o=!0===n.mouseInteraction||void 0===n.mouseInteraction?{}:n.mouseInteraction,r=[];return Object.keys(d).filter((function(e){return Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==o[e]})).forEach((function(n){var o=n.toLowerCase(),a=function(n){return function(o){if(!T(o.target,t)){var r=E.getId(o.target),a=L(o)?o.changedTouches[0]:o,i=a.clientX,u=a.clientY;e({type:d[n],id:r,x:i,y:u})}}}(n);r.push(k(o,a))})),function(){r.forEach((function(e){return e()}))}}var q,B=["INPUT","TEXTAREA","SELECT"],X=new WeakMap;function Y(e,o){void 0===o&&(o={}),function(e,t){var n=e.mutationCb,o=e.mousemoveCb,a=e.mouseInteractionCb,i=e.scrollCb,u=e.viewportResizeCb,s=e.inputCb,l=e.mediaInteractionCb,c=e.styleSheetRuleCb,d=e.canvasMutationCb,p=e.fontCb,f=e.logCb;e.mutationCb=function(){for(var e=[],o=0;o<arguments.length;o++)e[o]=arguments[o];t.mutation&&t.mutation.apply(t,r(e)),n.apply(void 0,r(e))},e.mousemoveCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mousemove&&t.mousemove.apply(t,r(e)),o.apply(void 0,r(e))},e.mouseInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mouseInteraction&&t.mouseInteraction.apply(t,r(e)),a.apply(void 0,r(e))},e.scrollCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.scroll&&t.scroll.apply(t,r(e)),i.apply(void 0,r(e))},e.viewportResizeCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.viewportResize&&t.viewportResize.apply(t,r(e)),u.apply(void 0,r(e))},e.inputCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.input&&t.input.apply(t,r(e)),s.apply(void 0,r(e))},e.mediaInteractionCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.mediaInteaction&&t.mediaInteaction.apply(t,r(e)),l.apply(void 0,r(e))},e.styleSheetRuleCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.styleSheetRule&&t.styleSheetRule.apply(t,r(e)),c.apply(void 0,r(e))},e.canvasMutationCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.canvasMutation&&t.canvasMutation.apply(t,r(e)),d.apply(void 0,r(e))},e.fontCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.font&&t.font.apply(t,r(e)),p.apply(void 0,r(e))},e.logCb=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];t.log&&t.log.apply(t,r(e)),f.apply(void 0,r(e))}}(e,o);var a,i,u=function(e,t,n,o,r,a,i){W.init(e,t,n,o,r,a,i);var u=new MutationObserver(W.processMutations.bind(W));return u.observe(document,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),u}(e.mutationCb,e.blockClass,e.blockSelector,e.inlineStylesheet,e.maskInputOptions,e.recordCanvas,e.slimDOMOptions),s=function(e,t){if(!1===t.mousemove)return function(){};var n,o="number"==typeof t.mousemove?t.mousemove:50,r=[],a=M((function(t){var o=Date.now()-n;e(r.map((function(e){return e.timeOffset-=o,e})),t?c.TouchMove:c.MouseMove),r=[],n=null}),500),i=M((function(e){var t=e.target,o=L(e)?e.changedTouches[0]:e,i=o.clientX,u=o.clientY;n||(n=Date.now()),r.push({x:i,y:u,id:E.getId(t),timeOffset:Date.now()-n}),a(L(e))}),o,{trailing:!1}),u=[k("mousemove",i),k("touchmove",i)];return function(){u.forEach((function(e){return e()}))}}(e.mousemoveCb,e.sampling),l=U(e.mouseInteractionCb,e.blockClass,e.sampling),d=(a=e.scrollCb,i=e.blockClass,k("scroll",M((function(e){if(e.target&&!T(e.target,i)){var t=E.getId(e.target);if(e.target===document){var n=document.scrollingElement||document.documentElement;a({id:t,x:n.scrollLeft,y:n.scrollTop})}else a({id:t,x:e.target.scrollLeft,y:e.target.scrollTop})}}),e.sampling.scroll||100))),f=function(e){var t=-1,n=-1;return k("resize",M((function(){var o=x(),r=N();t===o&&n==r||(e({width:Number(r),height:Number(o)}),t=o,n=r)}),200),window)}(e.viewportResizeCb),h=function(e,n,o,a,i,u){function s(e){var t=e.target;if(t&&t.tagName&&!(B.indexOf(t.tagName)<0)&&!T(t,n)){var r=t.type;if("password"!==r&&!t.classList.contains(o)){var u=t.value,s=!1;"radio"===r||"checkbox"===r?s=t.checked:(a[t.tagName.toLowerCase()]||a[r])&&(u=i?i(u):"*".repeat(u.length)),l(t,{text:u,isChecked:s});var c=t.name;"radio"===r&&c&&s&&document.querySelectorAll('input[type="radio"][name="'+c+'"]').forEach((function(e){e!==t&&l(e,{text:e.value,isChecked:!s})}))}}}function l(n,o){var r=X.get(n);if(!r||r.text!==o.text||r.isChecked!==o.isChecked){X.set(n,o);var a=E.getId(n);e(t(t({},o),{id:a}))}}var c=("last"===u.input?["change"]:["input","change"]).map((function(e){return k(e,s)})),d=Object.getOwnPropertyDescriptor(HTMLInputElement.prototype,"value"),p=[[HTMLInputElement.prototype,"value"],[HTMLInputElement.prototype,"checked"],[HTMLSelectElement.prototype,"value"],[HTMLTextAreaElement.prototype,"value"],[HTMLSelectElement.prototype,"selectedIndex"]];return d&&d.set&&c.push.apply(c,r(p.map((function(e){return I(e[0],e[1],{set:function(){s({target:this})}})})))),function(){c.forEach((function(e){return e()}))}}(e.inputCb,e.blockClass,e.ignoreClass,e.maskInputOptions,e.maskInputFn,e.sampling),m=function(e,t){var n=function(n){return function(o){var r=o.target;r&&!T(r,t)&&e({type:"play"===n?p.Play:p.Pause,id:E.getId(r)})}},o=[k("play",n("play")),k("pause",n("pause"))];return function(){o.forEach((function(e){return e()}))}}(e.mediaInteractionCb,e.blockClass),v=function(e){var t=CSSStyleSheet.prototype.insertRule;CSSStyleSheet.prototype.insertRule=function(n,o){var r=E.getId(this.ownerNode);return-1!==r&&e({id:r,adds:[{rule:n,index:o}]}),t.apply(this,arguments)};var n=CSSStyleSheet.prototype.deleteRule;return CSSStyleSheet.prototype.deleteRule=function(t){var o=E.getId(this.ownerNode);return-1!==o&&e({id:o,removes:[{index:t}]}),n.apply(this,arguments)},function(){CSSStyleSheet.prototype.insertRule=t,CSSStyleSheet.prototype.deleteRule=n}}(e.styleSheetRuleCb),y=e.recordCanvas?function(e,t){var o,a,i=Object.getOwnPropertyNames(CanvasRenderingContext2D.prototype),u=[],s=function(n){try{if("function"!=typeof CanvasRenderingContext2D.prototype[n])return"continue";var o=O(CanvasRenderingContext2D.prototype,n,(function(o){return function(){for(var a=this,i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];return T(this.canvas,t)||setTimeout((function(){var t=r(i);"drawImage"===n&&t[0]&&t[0]instanceof HTMLCanvasElement&&(t[0]=t[0].toDataURL()),e({id:E.getId(a.canvas),property:n,args:t})}),0),o.apply(this,i)}}));u.push(o)}catch(t){var a=I(CanvasRenderingContext2D.prototype,n,{set:function(t){e({id:E.getId(this.canvas),property:n,args:[t],setter:!0})}});u.push(a)}};try{for(var l=n(i),c=l.next();!c.done;c=l.next()){s(c.value)}}catch(e){o={error:e}}finally{try{c&&!c.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return function(){u.forEach((function(e){return e()}))}}(e.canvasMutationCb,e.blockClass):function(){},g=e.collectFonts?function(e){var t=[],n=new WeakMap,o=FontFace;window.FontFace=function(e,t,r){var a=new o(e,t,r);return n.set(a,{family:e,buffer:"string"!=typeof t,descriptors:r,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),a};var r=O(document.fonts,"add",(function(t){return function(o){return setTimeout((function(){var t=n.get(o);t&&(e(t),n.delete(o))}),0),t.apply(this,[o])}}));return t.push((function(){window.FonFace=o})),t.push(r),function(){t.forEach((function(e){return e()}))}}(e.fontCb):function(){},b=e.logOptions?function(e,t){var o,a,i=this,u=t.logger;if(!u)return function(){};var s=0,l=[];if(t.level.includes("error")&&window){var c=window.onerror;window.onerror=function(){for(var n=[],o=0;o<arguments.length;o++)n[o]=arguments[o];c&&c.apply(i,n);var r=[];n[n.length-1]instanceof Error&&(r=m(n[n.length-1].stack,0));var a=[V(n[0],t.stringifyOptions)];e({level:"error",trace:r,payload:a})},l.push((function(){window.onerror=c}))}try{for(var d=n(t.level),p=d.next();!p.done;p=d.next()){var f=p.value;l.push(h(u,f))}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}return function(){l.forEach((function(e){return e()}))};function h(n,o){var a=this;return n[o]?O(n,o,(function(n){return function(){for(var i=[],u=0;u<arguments.length;u++)i[u]=arguments[u];n.apply(a,i);try{var l=m((new Error).stack),c=i.map((function(e){return V(e,t.stringifyOptions)}));++s<t.lengthThreshold?e({level:o,trace:l,payload:c}):s===t.lengthThreshold&&e({level:"warn",trace:[],payload:[V("The number of log records reached the threshold.")]})}catch(e){n.apply(void 0,r(["rrweb logger error:",e],i))}}})):function(){}}function m(e,t){void 0===t&&(t=1);var n=[];return e&&(n=e.split("at").splice(1+t).map((function(e){return e.trim()}))),n}}(e.logCb,e.logOptions):function(){};return function(){u.disconnect(),s(),l(),d(),f(),h(),m(),v(),y(),g(),b()}}function K(e){return t(t({},e),{timestamp:Date.now()})}function $(e){void 0===e&&(e={});var n=e.emit,r=e.checkoutEveryNms,a=e.checkoutEveryNth,i=e.blockClass,u=void 0===i?"rr-block":i,s=e.blockSelector,d=void 0===s?null:s,p=e.ignoreClass,f=void 0===p?"rr-ignore":p,h=e.inlineStylesheet,m=void 0===h||h,v=e.maskAllInputs,y=e.maskInputOptions,g=e.slimDOMOptions,b=e.maskInputFn,C=e.hooks,S=e.packFn,M=e.sampling,I=void 0===M?{}:M,O=e.mousemoveWait,T=e.recordCanvas,_=void 0!==T&&T,L=e.collectFonts,D=void 0!==L&&L,R=e.recordLog,F=void 0!==R&&R;if(!n)throw new Error("emit function is required");void 0!==O&&void 0===I.mousemove&&(I.mousemove=O);var A,z,P=!0===v?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:void 0!==y?y:{},j=!0===g||"all"===g?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===g,headMetaDescKeywords:"all"===g}:g||{},H={level:["assert","clear","count","countReset","debug","dir","dirxml","error","group","groupCollapsed","groupEnd","info","log","table","time","timeEnd","timeLog","trace","warn"],lengthThreshold:1e3,logger:console},V=F?!0===F?H:Object.assign({},H,F):{};void 0===A&&(A=window),"NodeList"in A&&!A.NodeList.prototype.forEach&&(A.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in A&&!A.DOMTokenList.prototype.forEach&&(A.DOMTokenList.prototype.forEach=Array.prototype.forEach);var U=0;function B(e){var t,n,r,a;void 0===e&&(e=!1),q(K({type:l.Meta,data:{href:window.location.href,width:N(),height:x()}}),e);var i=W.isFrozen();W.freeze();var s=o(function(e,t){var n=t||{},o=n.blockClass,r=void 0===o?"rr-block":o,a=n.inlineStylesheet,i=void 0===a||a,u=n.recordCanvas,s=void 0!==u&&u,l=n.blockSelector,c=void 0===l?null:l,d=n.maskAllInputs,p=void 0!==d&&d,f=n.slimDOM,h=void 0!==f&&f,m={};return[w(e,{doc:e,map:m,blockClass:r,blockSelector:c,skipChild:!1,inlineStylesheet:i,maskInputOptions:!0===p?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===p?{}:p,slimDOMOptions:!0===h||"all"===h?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===h,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===h?{}:h,recordCanvas:s}),m]}(document,{blockClass:u,blockSelector:d,inlineStylesheet:m,maskAllInputs:P,slimDOM:j,recordCanvas:_}),2),c=s[0],p=s[1];if(!c)return console.warn("Failed to snapshot the document");E.map=p,q(K({type:l.FullSnapshot,data:{node:c,initialOffset:{left:void 0!==window.pageXOffset?window.pageXOffset:(null===document||void 0===document?void 0:document.documentElement.scrollLeft)||(null===(n=null===(t=null===document||void 0===document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.scrollLeft)||(null===document||void 0===document?void 0:document.body.scrollLeft)||0,top:void 0!==window.pageYOffset?window.pageYOffset:(null===document||void 0===document?void 0:document.documentElement.scrollTop)||(null===(a=null===(r=null===document||void 0===document?void 0:document.body)||void 0===r?void 0:r.parentElement)||void 0===a?void 0:a.scrollTop)||(null===document||void 0===document?void 0:document.body.scrollTop)||0}}})),i||(W.emit(),W.unfreeze())}q=function(e,t){if(!W.isFrozen()||e.type===l.FullSnapshot||e.type===l.IncrementalSnapshot&&e.data.source===c.Mutation||(W.emit(),W.unfreeze()),n(S?S(e):e,t),e.type===l.FullSnapshot)z=e,U=0;else if(e.type===l.IncrementalSnapshot){U++;var o=a&&U>=a,i=r&&e.timestamp-z.timestamp>r;(o||i)&&B(!0)}};try{var X=[];X.push(k("DOMContentLoaded",(function(){q(K({type:l.DomContentLoaded,data:{}}))})));var $=function(){B(),X.push(Y({mutationCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.Mutation},e)}))},mousemoveCb:function(e,t){return q(K({type:l.IncrementalSnapshot,data:{source:t,positions:e}}))},mouseInteractionCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.MouseInteraction},e)}))},scrollCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.Scroll},e)}))},viewportResizeCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.ViewportResize},e)}))},inputCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.Input},e)}))},mediaInteractionCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.MediaInteraction},e)}))},styleSheetRuleCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.StyleSheetRule},e)}))},canvasMutationCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.CanvasMutation},e)}))},fontCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.Font},e)}))},logCb:function(e){return q(K({type:l.IncrementalSnapshot,data:t({source:c.Log},e)}))},blockClass:u,blockSelector:d,ignoreClass:f,maskInputOptions:P,maskInputFn:b,inlineStylesheet:m,sampling:I,recordCanvas:_,collectFonts:D,slimDOMOptions:j,logOptions:V},C))};return"interactive"===document.readyState||"complete"===document.readyState?$():X.push(k("load",(function(){q(K({type:l.Load,data:{}})),$()}),window)),function(){X.forEach((function(e){return e()}))}}catch(e){console.warn(e)}}return $.addCustomEvent=function(e,t){if(!q)throw new Error("please add custom event after start recording");q(K({type:l.Custom,data:{tag:e,payload:t}}))},$.freezePage=function(){W.freeze()},$}();
//# sourceMappingURL=rrweb-record.min.js.map
